<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Demo JS API</title>
  </head>
  <body>
    <h1>Demo AJAX avec API Personnes et AXIOS</h1>

    <button onclick="afficherFetch()">Afficher la liste</button>
    <br /><br />
    <button onclick="afficherAxios()">Afficher la liste AXIOS</button>

    <br /><br />
    <input id="article" />
    <button onclick="ajouter()">Ajouter un Article</button>
    <br /><br />
    <button onclick="effacer()">Effacer un Article 2</button>

    <br /><br />
    <button onclick="modifier()">Modifier un Article 3</button>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"
      integrity="sha512-bZS47S7sPOxkjU/4Bt0zrhEtWx0y0CRkhEp8IckzK+ltifIIE9EMIMTuT/mEzoIMewUINruDBIR/jJnbguonqQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script>
      let url = "http://localhost/projet-full-stack/backend/public/api/item";
      function afficherFetch() {
        //console.log("abc");
        fetch(url)
          .then((response) => response.json())
          .then((articles) => {
            console.log(articles);
            /*
            for (let article of aricles){
                // crÃ©er des blaise HTML
            }
            */
          });
      }
      function afficherAxios() {
        axios.get(url).then((response) => {
          let articles = response.data;
          console.log(articles);
        });
      }
      function ajouter() {
        let article = document.getElementById("article").value;
        let body = { titre: article };
        document.getElementById("article").value = ""; // je vide le champ input
        axios.post(url, body).then((response) => {
          let article = response.data;
          console.log(article);
        });
      }

      function effacer() {
        let id = 2;
        let url2 = url + "/" + id;
        axios.delete(url2).then((response) => {
          let article = response.data;
          console.log(article);
        });
      }

      function modifier() {
        let id = 3;
        let url2 = url + "/" + id;
        axios.put(url2).then((response) => {
          let article = response.data;
          console.log(article);
        });
      }
    </script>
  </body>
</html>
